<div ng-controller='MyParadropCtrl'>
  <div ng-controller='ConfigCtrl'>
    <h1><strong>{{ deviceToUpdate.name }}</strong>: Configuration Update</h1>
    <div ng-if='!deviceToUpdate.ispending'>
      <form name='configUpdateForm'
            method='post'
            novalidate
            ng-controller='ConfigCtrl'
            ng-submit='submitUpdate(configUpdateData, configUpdateForm.$valid)'
            novalidate form-autofill-fix>

        <div class='row'>
          <div class='form-group col-md-6'>
            <strong>Operating Mode</strong>
            <input type='radio' ng-model='configUpdateData.isauto' ng-value='true'> Automatic
            <input type='radio' ng-model='configUpdateData.isauto' ng-value='false'> Manual
          </div>

          <div ng-if='!configUpdateData.isauto'>
            <div class='form-group col-md-3' ng-show='!configUpdateData.isauto'>
              <label for='channelSelect'>
                Channel Select
              </label>
              <select name='channelSelect' ng-model='configUpdateData.channel'
                ng-options='channelNumber for channelNumber in CHANNELS | orderBy:channelNumber'
                ng-disabled='configUpdateData.isauto'>
              </select>
            </div>
            <div class='form-group col-md-3'>
              <div class='error-container bg-danger' ng-show='configUpdateForm.channelSelect.$dirty && !configUpdateData.isauto'>
                <small class='error' ng-show='usingSlowChannel(configUpdateForm.channelSelect.$viewValue)'>
                  You are choosing a channel that is not optimal for performance!
                </small>
              </div>
            </div>
          </div>
          <div class='form-group col-md-6' ng-if='configUpdateData.isauto'>
            <small ng-show='configUpdateData.isauto'>
              Channel selection is disabled when in Automatic mode.
            </small>
          </div>
        </div>
        <br>
        <div class='row btn-set'>
          <div class='col-md-4'>
            <button type='submit' class='btn btn-primary btn-block' ng-disabled='configUpdateForm.$invalid || !configUpdateForm.$dirty'>
              Submit Update
            </button>
          </div>
          <div class='col-md-4'>
            <button type='button' class='btn btn-warning btn-block' ng-disabled='!configUpdateForm.$dirty' ng-click='revertConfig()'>
              Revert
            </button>
          </div>
          <div class='col-md-4'>
            <a class='btn btn-danger btn-block' ng-href='my_paradrop/configs' role='button' style='font-family: sans-serif;'>
              Cancel
            </a>
          </div>
        </div>
      </form>
    </div>
    <div ng-if='deviceToUpdate.ispending'>
      There are updates currently pending. Please check back later.
    </div>
    <br>
  </div>
</div>
