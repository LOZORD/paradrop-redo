<h1>Admin Map Settings</h1>
<div class="row">
  <div class='col-md-12 form-group'>
    <div class="btn-group">
      <button type="button" class="btn btn-primary" ng-click=''>{{group_id}}</button>
      <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
        <span class="caret"></span>
        <span class="sr-only">Toggle Dropdown</span>
      </button>
      <ul class="dropdown-menu" role="menu">
        <li ng-repeat="map in mapsArray"><a href="#!/map_settings/{{map.groupname}}" >{{map.groupname}}</a></li>
      </ul>
    </div>
    <button class="btn btn-primary" data-toggle="modal" data-target="#settings">Map Settings</button>
    <button class="btn btn-primary" ng-click="revertMarkers()">Revert Markers</button>
    <button class="btn btn-primary" ng-click="submitChanges()">Submit Changes</button>
    <button class="btn btn-primary" ng-click="destroyCookie()">Reload Old Settings</button>
  </div>
</div>
  <!-- Tab panes -->
  <div class="tab-pane">
    <h1 ng-if="mapError">Error loading map</h1>
    <img class="img-responsive center-block" ng-show="!mapReady && !mapError" ng-src='images/spinner.gif'/>
    <map ng-if="mapReady" style="height: 700px;" 
      center="{{mapData.centerX}}, {{mapData.centerY}}" 
        street-view-control="false" 
        zoom-control="false" 
        pan-control="false" 
        map-type-id="{{mapData.typeid}}" 
        map-type-control-options="{mapTypeIds: ['{{mapData.typeid}}']}"
        on-click="onClick()" 
        >
        <map-type name="{{mapData.typeid}}" object="firstFloorMapType">
        </map-type>
        <marker  ng-repeat="ap in mapData.aps" position="{{ap.lat}},{{ap.lng}}" title="{{revApNameMap[ap.apid]}}" id="{{ap.apid}}" icon="images/wifi.png" draggable='true' ></marker>
    </map>
  </div>
</div>

<div class="modal fade" id="settings" tabindex="-1" role="dialog" aria-labelledby="Settings" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">
          <span aria-hidden="true">&times;</span>
          <span class="sr-only">Cancel</span>
        </button>
        <h4 class="modal-title" id="myModalLabel">Map Settings</h4>
      </div>
      <div class="modal-body">
        <ng-include src="'partials/map_settings_form.html'"></ng-include>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">
          Cancel
        </button>
        <button ng-click="submitChanges()" class="btn btn-primary" data-dismiss="modal">
          Submit changes
        </button>
      </div>
    </div>
  </div>
</div>
